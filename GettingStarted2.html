<html>
<head>
<meta charset="utf-8">
<title>Nylas Mail — GettingStarted2.md</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<link rel="stylesheet" type="text/css" href="css/main.css"/>
<link rel="stylesheet" type="text/css" href="css/tomorrow.css">
</head>
<body>
<div id="header">
  <div class="container">
    <img src="images/edgehill.png" class="logo" />
    <div class="title">Nylas Mail<div class="small">Developer Preview</div></div>
  </div>
</div>

<div class="container">

<div class="page-title">GettingStarted2.md</div>

<div id="sidebar">
  <div class="heading">Getting Started</div>
  <ul>
        <li><a href="Index.html" >Welcome</a></li>
  </ul>
  <div class="heading">Guides</div>
  <ul>
        <li><a href="PackageOverview.html" >Building a Package</a></li>
        <li><a href="InterfaceConcepts.html" >Interface Concepts</a></li>
        <li><a href="React.html" >Interface Components</a></li>
        <li><a href="Architecture.html" >Application Architecture</a></li>
        <li><a href="Debugging.html" >Debugging N1</a></li>
        <li><a href="Database.html" >Accessing the Database</a></li>
        <li><a href="DraftStoreExtensions.html" >Extending the Composer</a></li>
        <li><a href="WritingSpecs.html" >Writing Specs</a></li>
        <li><a href="FAQ.html" >FAQ</a></li>
  </ul>
  <div class="heading">Sample Code</div>
  <ul>
        <li><a href="https://github.com/nylas/edgehill-plugins/tree/master/translate" target="_blank">Composer Translation</a></li>
        <li><a href="https://github.com/nylas/edgehill-plugins/tree/master/sidebar-github-profile" target="_blank">Github Sidebar</a></li>
  </ul>
  <div class="heading">API Reference</div>
  <ul>
        <div class="heading">General</div>
        <ul>
              <li><a href="Actions.html" >Actions</a></li>
              <li><a href="Atom.html" >Atom</a></li>
              <li><a href="BufferedNodeProcess.html" >BufferedNodeProcess</a></li>
              <li><a href="BufferedProcess.html" >BufferedProcess</a></li>
              <li><a href="ChangeFolderTask.html" >ChangeFolderTask</a></li>
              <li><a href="ChangeLabelsTask.html" >ChangeLabelsTask</a></li>
              <li><a href="Config.html" >Config</a></li>
              <li><a href="DraggableImg.html" >DraggableImg</a></li>
              <li><a href="FocusTrackingRegion.html" >FocusTrackingRegion</a></li>
              <li><a href="Task.html" >Task</a></li>
              <li><a href="TaskQueueStatusStore.html" >TaskQueueStatusStore</a></li>
        </ul>
        <div class="heading">Component Kit</div>
        <ul>
              <li><a href="EventedIFrame.html" >EventedIFrame</a></li>
              <li><a href="Flexbox.html" >Flexbox</a></li>
              <li><a href="InjectedComponent.html" >InjectedComponent</a></li>
              <li><a href="InjectedComponentSet.html" >InjectedComponentSet</a></li>
              <li><a href="Menu.html" >Menu</a></li>
              <li><a href="MenuItem.html" >MenuItem</a></li>
              <li><a href="MenuNameEmailItem.html" >MenuNameEmailItem</a></li>
              <li><a href="MultiselectActionBar.html" >MultiselectActionBar</a></li>
              <li><a href="MultiselectList.html" >MultiselectList</a></li>
              <li><a href="Popover.html" >Popover</a></li>
              <li><a href="ResizableRegion.html" >ResizableRegion</a></li>
              <li><a href="RetinaImg.html" >RetinaImg</a></li>
              <li><a href="Spinner.html" >Spinner</a></li>
              <li><a href="TimeoutTransitionGroupChild.html" >TimeoutTransitionGroupChild</a></li>
              <li><a href="UnsafeComponent.html" >UnsafeComponent</a></li>
        </ul>
        <div class="heading">Models</div>
        <ul>
              <li><a href="Account.html" >Account</a></li>
              <li><a href="Calendar.html" >Calendar</a></li>
              <li><a href="Contact.html" >Contact</a></li>
              <li><a href="File.html" >File</a></li>
              <li><a href="Folder.html" >Folder</a></li>
              <li><a href="Label.html" >Label</a></li>
              <li><a href="Message.html" >Message</a></li>
              <li><a href="Model.html" >Model</a></li>
              <li><a href="Thread.html" >Thread</a></li>
        </ul>
        <div class="heading">Stores</div>
        <ul>
              <li><a href="AccountStore.html" >AccountStore</a></li>
              <li><a href="ComponentRegistry.html" >ComponentRegistry</a></li>
              <li><a href="ContactStore.html" >ContactStore</a></li>
              <li><a href="EventStore.html" >EventStore</a></li>
              <li><a href="FocusedContentStore.html" >FocusedContentStore</a></li>
              <li><a href="MessageStoreExtension.html" >MessageStoreExtension</a></li>
              <li><a href="TaskQueue.html" >TaskQueue</a></li>
              <li><a href="WorkspaceStore.html" >WorkspaceStore</a></li>
        </ul>
        <div class="heading">Database</div>
        <ul>
              <li><a href="Attribute.html" >Attribute</a></li>
              <li><a href="AttributeBoolean.html" >AttributeBoolean</a></li>
              <li><a href="AttributeCollection.html" >AttributeCollection</a></li>
              <li><a href="AttributeDateTime.html" >AttributeDateTime</a></li>
              <li><a href="AttributeJoinedData.html" >AttributeJoinedData</a></li>
              <li><a href="AttributeNumber.html" >AttributeNumber</a></li>
              <li><a href="AttributeObject.html" >AttributeObject</a></li>
              <li><a href="AttributeServerId.html" >AttributeServerId</a></li>
              <li><a href="AttributeString.html" >AttributeString</a></li>
              <li><a href="DatabaseStore.html" >DatabaseStore</a></li>
              <li><a href="DatabaseView.html" >DatabaseView</a></li>
              <li><a href="Matcher.html" >Matcher</a></li>
              <li><a href="ModelQuery.html" >ModelQuery</a></li>
              <li><a href="SortOrder.html" >SortOrder</a></li>
        </ul>
        <div class="heading">Drafts</div>
        <ul>
              <li><a href="DraftChangeSet.html" >DraftChangeSet</a></li>
              <li><a href="DraftStore.html" >DraftStore</a></li>
              <li><a href="DraftStoreExtension.html" >DraftStoreExtension</a></li>
              <li><a href="DraftStoreProxy.html" >DraftStoreProxy</a></li>
        </ul>
        <div class="heading">Atom</div>
        <ul>
              <li><a href="Clipboard.html" >Clipboard</a></li>
              <li><a href="Color.html" >Color</a></li>
              <li><a href="CommandRegistry.html" >CommandRegistry</a></li>
              <li><a href="DeserializerManager.html" >DeserializerManager</a></li>
              <li><a href="MenuManager.html" >MenuManager</a></li>
              <li><a href="PackageManager.html" >PackageManager</a></li>
              <li><a href="ScopeDescriptor.html" >ScopeDescriptor</a></li>
              <li><a href="StyleManager.html" >StyleManager</a></li>
              <li><a href="ThemeManager.html" >ThemeManager</a></li>
        </ul>
  </ul>
</div>
<div id="main" class="article">
<h2 class="gsg-header">Step 2: Building your first package</h2>

<p>If you followed the <a href="getting-started">first part</a> of our Getting Started Guide, you should have a brand new package just waiting to be explored. </p>
<p>This sample package simply adds the name of the currently focused contact to the sidebar:</p>
<p><img class="gsg-center" src="images/sidebar-example.png"/></p>
<p>We&#39;re going to build on this to show the sender&#39;s <a href="http://gravatar.com">Gravatar</a> image in the sidebar, instead of just their name. You can check out the full code for the package <a href="https://github.com/nylas/edgehill-plugins/tree/master/sidebar-gravatar">in the sample packages repository</a>.</p>
<p>Find the package source in <code>~/.nylas/dev/packages</code> and open the contents in your favorite text editor.</p>
<blockquote>
<p>We use <a href="https://github.com/jsdf/coffee-react">CJSX</a>, a <a href="http://coffeescript.org/">CoffeeScript</a> syntax for <a href="https://facebook.github.io/react/docs/jsx-in-depth.html">JSX</a>, to streamline our package code.
 For syntax highlighting, we recommend <a href="https://github.com/babel/babel-sublime">Babel</a> for Sublime, or the <a href="https://atom.io/packages/language-cjsx">CJSX Language</a> Atom package.</p>
</blockquote>
<h3 id="changing-the-data">Changing the data</h3>
<p>Let&#39;s poke around and change what the sidebar displays.</p>
<p>You&#39;ll find the code responsible for the sidebar in <code>lib/my-message-sidebar.cjsx</code>. Take a look at the <code>render</code> method -- this generates the content which appears in the sidebar.</p>
<p>(How does it get in the sidebar? See <a href="interfaceconcepts">Interface Concepts</a> and look at <code>main.cjsx</code> for clues. We&#39;ll dive into this more later in the guide.)</p>
<p>We can change the sidebar to display the contact&#39;s email address as well. Check out the <a href="reference/contact">Contact attributes</a> and change the <code>_renderContent</code> method to display more information:</p>
<pre><code class="lang-coffee">_renderContent: =&gt;
  <span class="hljs-variable">&lt;div className="header"&gt;</span>
      <span class="hljs-variable">&lt;h1&gt;</span>Hi, {@<span class="hljs-keyword">state</span>.contact.name} ({@<span class="hljs-keyword">state</span>.contact.email})!<span class="hljs-variable">&lt;/h1&gt;</span>
  <span class="hljs-variable">&lt;/div&gt;</span>
</code></pre>
<p>After making changes to the package, reload Nylas Mail by going to <code>View &gt; Reload</code>.</p>
<h3 id="installing-a-dependency">Installing a dependency</h3>
<p>Now we&#39;ve figured out how to show the contact&#39;s email address, we can use that to generate the <a href="http://gravatar.com">Gravatar</a> for the contact. However, as per the <a href="https://en.gravatar.com/site/implement/images/">Gravatar documentation</a>, we need to be able to calculate the MD5 hash for an email address first.</p>
<p>Let&#39;s install the <code>md5</code> package and save it as a dependency in our <code>package.json</code>:</p>
<pre><code class="lang-bash">$ npm <span class="hljs-operator"><span class="hljs-keyword">install</span> <span class="hljs-keyword">md5</span> <span class="hljs-comment">--save</span></span>
</code></pre>
<p>Installing other dependencies works the same way.</p>
<p>Now, add the <code>md5</code> requirement in <code>my-message-sidebar.cjsx</code> and update the <code>_renderContent</code> method to show the md5 hash:</p>
<pre><code class="lang-coffee">md5 = require <span class="hljs-symbol">'md</span>5'

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyMessageSidebar</span> <span class="hljs-keyword"><span class="hljs-keyword">extends</span></span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span>
</span>  <span class="hljs-annotation">@displayName</span>: <span class="hljs-symbol">'MyMessageSideba</span>r'

  ...

  _renderContent =&gt;
    &lt;div className=<span class="hljs-string">"header"</span>&gt;
      {md5(<span class="hljs-annotation">@state</span>.contact.email)}
    &lt;/div&gt;
</code></pre>
<blockquote>
<p>JSX Tip: The <code>{..}</code> syntax is used for JavaScript expressions inside HTML elements. <a href="https://facebook.github.io/react/docs/jsx-in-depth.html">Learn more</a></p>
</blockquote>
<p>You should see the MD5 hash appear in the sidebar (after you reload Nylas Mail):</p>
<p><img class="gsg-center" src="images/sidebar-md5.png"/></p>
<h3 id="let-s-render-">Let&#39;s Render!</h3>
<p>Turning the MD5 hash into a Gravatar image is simple. We need to add an <code>&lt;img&gt;</code> tag to the rendered HTML:</p>
<pre><code class="lang-coffee"><span class="xml">_renderContent =&gt;
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">className</span>=<span class="hljs-value">"header"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">src</span>=</span></span><span class="hljs-expression">{'<span class="hljs-variable">http</span>:/<span class="hljs-end-block">/www.gravatar.com</span><span class="hljs-end-block">/avatar</span>/' + <span class="hljs-variable">md</span>5(@<span class="hljs-variable">state.contact.email</span>)}</span><span class="xml"><span class="hljs-tag">/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span></span>
</code></pre>
<p>Now the Gravatar image associated with the currently focused contact appears in the sidebar. If there&#39;s no image available, the Gravatar default will show; you can <a href="https://en.gravatar.com/site/implement/images/">add parameters to your image tag</a> to change the default behavior.</p>
<p><img class="gsg-center" src="images/sidebar-gravatar.png"/></p>
<h3 id="styling">Styling</h3>
<p>Adding styles to our Gravatar image is a matter of editing <code>stylesheets/main.less</code> and applying the class to our <code>img</code> tag. Let&#39;s make it round:</p>
<p><div class="filename">stylesheets/main.less</div></p>
<pre><code class="lang-css"><span class="hljs-class">.gravatar</span> <span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">border-radius</span>:<span class="hljs-value"> <span class="hljs-number">45px</span></span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">border</span>:<span class="hljs-value"> <span class="hljs-number">2px</span> solid <span class="hljs-hexcolor">#ccc</span></span></span>;
}</span>
</code></pre>
<p><div class="filename">lib/my-message-sidebar.cjsx</div></p>
<pre><code class="lang-coffee">_renderContent =&gt;
    gravatar = <span class="hljs-string">"http://www.gravatar.com/avatar/"</span> + md5(@<span class="hljs-keyword">state</span>.contact.email)

    <span class="hljs-variable">&lt;div className="header"&gt;</span>
      <span class="hljs-variable">&lt;img src={gravatar} className="gravatar"/&gt;</span>
    <span class="hljs-variable">&lt;/div&gt;</span>
</code></pre>
<blockquote>
<p>React Tip: Remember to use DOM property names, i.e. <code>className</code> instead of <code>class</code>.</p>
</blockquote>
<p>You&#39;ll see these styles reflected in your sidebar.</p>
<p><img class="gsg-center" src="images/sidebar-style.png"/></p>
<p>If you&#39;re a fan of using the Chrome Developer Tools to tinker with styles, no fear; they work in Nylas Mail, too. Open them by going to <code>Developer &gt; Toggle Developer Tools</code>. You&#39;ll also find them helpful for debugging in the event that your package isn&#39;t behaving as expected.</p>
<hr/>

<h2 class="continue"><a href="getting-started-3">Continue this guide: adding a data store to your package</a></h2>

<hr/>
</div>

</div>

<div id="footer">
  <div class="container">
    <img src="images/edgehill.png" class="logo" />
    <div class="small">Nylas Mail Developer Preview<br><em>© 2014-2015 Nylas, Inc.</em></div>
  </div>
</div>

</body>
</html>
